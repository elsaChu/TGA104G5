package com.event.controller;

import java.io.IOException;
import java.io.InputStream;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.MultipartConfig;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.Part;

import org.json.JSONArray;
import org.json.JSONObject;

import com.event.model.EventClassService;
import com.event.model.EventService;
import com.event.model.EventTypeService;
import com.event.model.EventVO;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;


//@WebServlet("/addEmpServlet")
@MultipartConfig
public class addEventServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;

	protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
		doPost(req,res);
	}

	protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
		req.setCharacterEncoding("UTF-8");
		res.setContentType("text/html; charset=UTF-8");
		
		String action = req.getParameter("action");
		if("page1".equals(action)) {
			System.out.println("in page1");
			/***********************1.接收請求參數 - 輸入格式的錯誤處理*************************/
			List<String> errorMsgs = new LinkedList<String>();
			req.setAttribute("errorMsgs", errorMsgs);
				
			Integer organizerNumber = null;
			try {
				organizerNumber = Integer.valueOf("1"); //等串起來要改
			} catch (NumberFormatException e) {
				errorMsgs.add("未登入請重新登入");
			}
				
			String eventName = req.getParameter("eventName");
			if (eventName == null || eventName.trim().length() == 0) {
				errorMsgs.add("活動名稱: 請勿空白");
			}
			
			java.sql.Timestamp eventStartDate = null;
			try {
				eventStartDate = java.sql.Timestamp.valueOf(req.getParameter("start_date").trim());
				System.out.println("page1 date=" + eventStartDate);
			} catch (IllegalArgumentException e) {
				errorMsgs.add("請輸入日期!");
			}
			
			java.sql.Timestamp eventEndDate = null;
			try {
				eventEndDate = java.sql.Timestamp.valueOf(req.getParameter("end_date").trim());
				if(eventStartDate !=null) {
					if(eventEndDate.compareTo(eventStartDate) == -1) {
						errorMsgs.add("日期區間不對!");
					}
				}
			} catch (IllegalArgumentException e) {
				errorMsgs.add("請輸入日期!");
			}
			
			Integer peopleNumber = null;
			try {
				peopleNumber = Integer.valueOf(req.getParameter("peopleNumber").trim());
			} catch (NumberFormatException e) {
				errorMsgs.add("活動人數： 只能是數字");
			}

			String eventPlace = req.getParameter("eventPlace");
			if (eventPlace == null || eventPlace.trim().length() == 0) {
				errorMsgs.add("活動地點： 請勿空白");
			}
			
			String eventP2 = req.getParameter("eventP2");
			if (eventPlace == null || eventPlace.trim().length() == 0) {
				errorMsgs.add("活動地址： 請勿空白");
			}
			
			String eventSummary = req.getParameter("eventSummary");
			if (eventPlace == null || eventPlace.trim().length() == 0) {
				errorMsgs.add("活動簡介： 請勿空白");
			}
			
			String eventDescribe = req.getParameter("eventDescribe");
			if (eventPlace == null || eventPlace.trim().length() == 0) {
				errorMsgs.add("活動描述： 請勿空白");
			}
			
			Part bigImg = req.getPart("bigImg");
			String filename = bigImg.getSubmittedFileName();
			if(filename == null || filename.length() ==0 || bigImg.getContentType() == null) {
				errorMsgs.add("請選擇封面圖片");
			}
			
//			Boolean collectType = Boolean.valueOf(req.getParameter("collectType"));
//			if (collectType == null) {
//				errorMsgs.add("請選擇收集資料類型");
//			}
			
			String isON = req.getParameter("isON");
			Boolean isON_ = false;
			if ("on".equals(isON)) {
				isON_ = true;
			}
			
			String needSeat = req.getParameter("needSeat");
			System.out.println(needSeat);
			Boolean needSeat_ = false;
			if ("on".equals(needSeat)) {
				needSeat_ = true;
			}
					
			String[] eventClassNumber = req.getParameterValues("eventClassNumber");
			if (eventClassNumber == null || eventClassNumber.length == 0) {
				errorMsgs.add("活動分類至少選擇一項");
			}

			
			//要回傳到新增頁面的資料內容
			EventVO eventvo= new EventVO();
			eventvo.setOrganizerNumber(organizerNumber);
			eventvo.setEventName(eventName);
			eventvo.setEventStartDate(eventStartDate);
			eventvo.setEventEndDate(eventEndDate);
			eventvo.setPeopleNumber(peopleNumber);
			eventvo.setEventPlace(eventPlace);
			eventvo.setEventP2(eventP2);
			eventvo.setEventSummary(eventSummary);
			eventvo.setEventDescribe(eventDescribe);
//			eventvo.setCollectType(collectType);

			// Send the use back to the form, if there were errors
			if(!errorMsgs.isEmpty()) {
				req.setAttribute("eventvo", eventvo);
				RequestDispatcher failureView = req
						.getRequestDispatcher("/back-organizer-end/event/addEvent1.jsp");
				failureView.forward(req, res);
				return;
			}
			
			/***************************2.第一頁資料帶至下一頁***************************************/
			//set other eventvo data
			eventvo.setIsON(isON_);
			eventvo.setNeedSeat(needSeat_);

			Part smallImg = req.getPart("smallImg");
			String smallImgfilename = smallImg.getSubmittedFileName();
			byte[] smallimg = null;
			if(smallImgfilename != null && smallImgfilename.length() !=0 && smallImg.getContentType() != null) {
				String name = smallImg.getName();
				InputStream in = smallImg.getInputStream();
				smallimg = new byte[in.available()];
				in.read(smallimg);
				in.close();
				
			}
			eventvo.setSmallImg(smallimg);
			
			
			//bigImg
			byte[] bigimg = null;
			if(filename != null && filename.length() !=0 && bigImg.getContentType() != null) {
				String name = bigImg.getName();
				InputStream in = bigImg.getInputStream();
				bigimg = new byte[in.available()];
				in.read(bigimg);
				in.close();
			}	
			eventvo.setBigImg(bigimg);
			
			//set data go to page1
			JSONArray eventCN = new JSONArray(Arrays.asList(eventClassNumber));
			Map<String,Object> map=new HashMap<>();
			map.put("page1",eventvo);
			map.put("event_class", eventCN);
			Gson gson=new GsonBuilder().setDateFormat("yyyy-MM-dd HH:mm:ss").create();
			
			System.out.println(filename);
			System.out.println(smallImgfilename);
			req.setAttribute("adddata", gson.toJson(map));
			RequestDispatcher failureView = req
					.getRequestDispatcher("/back-organizer-end/event/addEvent2.jsp");
			failureView.forward(req, res);
			return;
		}
		
		//page2
		if("page2".equals(action)) {
			System.out.println("in page2");
			/***********************1.接收請求參數 - 輸入格式的錯誤處理*************************/
			String alldata = req.getParameter("alldata");
//			System.out.println(alldata);
//			String alldata ="{\"page1\":{\"organizerNumber\":1,\"eventName\":\"xxx\",\"eventStartDate\":\"Nov 26, 2022, 12:00:00 AM\",\"eventEndDate\":\"Dec 7, 2022, 8:54:46 PM\",\"peopleNumber\":100,\"eventPlace\":\"test palce1\",\"eventP2\":\"台灣台北市大安區光復南路420巷Everywhere burger club漢堡俱樂部\",\"eventSummary\":\"xxx\",\"bigImg\":[-1,-40,-1,-32,0,16,74,70,73,70,0,1,1,1,0,-112,0,-112,0,0,-1,-37,0,67,0,3,2,2,3,2,2,3,3,3,3,4,3,3,4,5,8,5,5,4,4,5,10,7,7,6,8,12,10,12,12,11,10,11,11,13,14,18,16,13,14,17,14,11,11,16,22,16,17,19,20,21,21,21,12,15,23,24,22,20,24,18,20,21,20,-1,-37,0,67,1,3,4,4,5,4,5,9,5,5,9,20,13,11,13,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,-1,-64,0,17,8,1,11,0,-30,3,1,34,0,2,17,1,3,17,1,-1,-60,0,31,0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,-1,-60,0,-75,16,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125,1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,-127,-111,-95,8,35,66,-79,-63,21,82,-47,-16,36,51,98,114,-126,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,-125,-124,-123,-122,-121,-120,-119,-118,-110,-109,-108,-107,-106,-105,-104,-103,-102,-94,-93,-92,-91,-90,-89,-88,-87,-86,-78,-77,-76,-75,-74,-73,-72,-71,-70,-62,-61,-60,-59,-58,-57,-56,-55,-54,-46,-45,-44,-43,-42,-41,-40,-39,-38,-31,-30,-29,-28,-27,-26,-25,-24,-23,-22,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-1,-60,0,31,1,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,-1,-60,0,-75,17,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119,0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,-127,8,20,66,-111,-95,-79,-63,9,35,51,82,-16,21,98,114,-47,10,22,36,52,-31,37,-15,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,-126,-125,-124,-123,-122,-121,-120,-119,-118,-110,-109,-108,-107,-106,-105,-104,-103,-102,-94,-93,-92,-91,-90,-89,-88,-87,-86,-78,-77,-76,-75,-74,-73,-72,-71,-70,-62,-61,-60,-59,-58,-57,-56,-55,-54,-46,-45,-44,-43,-42,-41,-40,-39,-38,-30,-29,-28,-27,-26,-25,-24,-23,-22,-14,-13,-12,-11,-10,-9,-8,-7,-6,-1,-38,0,12,3,1,0,2,17,3,17,0,63,0,-5,-94,-118,40,-81,-51,15,-48,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,43,23,-58,-102,-75,-58,-125,-31,61,95,80,-76,-117,-50,-71,-73,-74,121,35,65,-36,-128,127,-107,48,54,-10,-97,67,73,95,-103,-70,47,-19,29,-29,-115,39,-58,41,-81,75,-85,77,114,-34,110,-7,108,-28,-1,0,86,-53,-100,-108,-57,111,74,-3,6,-8,99,-15,27,76,-8,-95,-31,59,77,107,77,-112,21,-111,64,-106,44,-13,27,-9,7,-15,6,-87,-59,-60,-108,-18,117,-108,81,69,65,65,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,77,-110,53,-102,54,71,80,-56,-64,-85,41,-24,65,-22,41,-44,80,7,-63,-1,0,-75,-57,-64,100,-16,62,-83,-1,0,9,70,-119,6,-35,30,-15,-1,0,127,10,14,33,-112,-98,-65,66,79,-23,92,-25,-20,-89,-15,122,79,-121,62,60,-121,78,-69,-108,-115,27,85,97,20,-86,79,8,-3,-101,-14,31,-83,125,-19,-29,-97,8,-38,-8,-21,-62,-70,-106,-119,120,-118,-15,93,-60,-56,55,14,-115,-126,20,-2,25,-81,-53,15,19,104,119,62,17,-15,53,-2,-103,48,49,-36,89,92,50,3,-33,0,-4,-89,-14,-59,111,23,-52,-84,-52,-27,-93,-71,-6,-42,-84,25,67,3,-112,70,65,20,-75,-26,-65,-77,-57,-113,63,-31,96,-4,43,-47,-11,9,31,125,-36,73,-28,92,115,-50,-15,-49,-14,34,-67,42,-79,52,10,40,-94,-112,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,-116,-54,-118,75,48,81,-22,-57,2,-71,-19,99,-57,-38,38,-117,-111,61,-30,-69,-113,-32,-113,-109,-6,86,53,107,-46,-95,30,106,-78,81,94,102,-76,-23,84,-86,-7,105,-59,-74,116,84,87,-107,106,127,28,35,82,86,-58,-64,-73,-93,74,107,-102,-67,-8,-67,-81,-35,103,-53,-110,59,117,-12,64,127,-58,-66,122,-73,17,-32,41,105,25,57,122,35,-40,-89,-110,-30,-22,106,-43,-67,89,-17,85,-16,31,-19,-77,-31,20,-48,126,40,-61,-87,66,-127,34,-44,-32,-13,14,58,110,92,47,-12,-81,105,-72,-15,-42,-67,114,-60,-66,-89,55,-32,107,-54,62,50,120,107,83,-8,-116,-38,103,-6,102,-7,45,-55,5,-26,57,-62,-28,-12,-84,-80,-100,75,-121,-60,87,84,-71,26,79,-85,-79,24,-20,-82,88,28,60,-79,21,-86,43,35,-84,-3,-126,60,76,-49,15,-120,-76,23,124,-86,98,-26,53,39,-44,-127,-3,43,-21,-22,-8,63,-31,-97,-126,-26,-8,107,127,37,-3,-98,-89,47,-38,-28,77,-116,83,-123,-57,-27,94,-110,-2,61,-15,4,-111,-7,103,85,-72,-37,-2,-16,-82,-6,-71,-51,24,-44,106,49,109,119,62,54,89,-90,30,17,-9,110,-33,-95,-11,54,-17,-13,-111,75,95,38,-73,-118,53,118,108,-99,78,-29,63,-17,-43,-53,63,31,120,-126,-63,-127,-117,84,-101,-24,-52,8,-84,-106,117,78,-6,-63,-104,44,-30,-97,88,51,-22,106,43,-62,-76,31,-114,-38,-115,-85,42,106,-106,-21,119,23,119,78,27,-7,-41,-84,-8,107,-58,90,103,-118,-83,-60,-106,87,10,95,-8,-94,99,-122,31,-29,94,-90,31,27,67,17,-92,30,-67,-113,74,-122,50,-114,35,72,61,123,27,-108,81,69,119,29,-95,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,21,-117,-30,111,22,-23,-2,23,-75,50,-35,74,60,-62,62,72,-105,-17,53,101,86,-84,40,-63,-44,-88,-20,-111,-91,58,114,-85,37,8,43,-74,108,73,34,-61,27,59,-80,68,94,75,49,-64,21,-62,120,-97,-30,-34,-99,-93,-106,-122,-60,125,-74,-32,113,-107,63,32,-4,107,-51,124,85,-15,11,82,-15,60,-116,-91,-51,-75,-90,126,88,99,56,-4,-51,98,-23,122,29,-26,-79,38,-37,104,-103,-121,119,61,5,126,127,-114,-30,74,-107,37,-20,-80,43,-25,-41,-28,-113,-81,-62,-28,-112,-126,-10,-104,-89,-14,-1,0,54,105,-21,-34,62,-42,117,-26,111,58,-23,-94,-120,-1,0,-53,56,-114,-47,88,-106,-74,55,23,-14,98,8,94,102,61,-44,103,-11,-81,65,-47,-2,29,-38,-38,-19,-110,-15,-2,-47,39,-9,71,-35,21,-43,91,-39,-63,104,-127,97,-119,35,81,-3,-47,94,7,-44,-79,24,-87,123,76,76,-11,-5,-39,-20,125,102,-115,5,-55,66,63,-95,-26,-74,63,15,117,43,-84,25,118,-37,-81,-71,-55,-83,-53,95,-122,118,-55,-125,61,-53,-56,125,20,98,-69,74,43,-66,25,126,30,27,-85,-6,-100,-78,-59,-43,-105,91,28,-20,62,2,-46,34,-21,19,63,-5,-51,94,109,-29,-21,27,125,63,95,104,45,-29,-14,-29,85,31,47,-27,94,-41,94,65,-15,62,19,31,-120,-125,-29,-121,76,-1,0,42,-24,116,105,-45,87,-124,82,62,51,-119,-86,84,-98,7,87,125,80,-49,6,120,28,120,-90,41,102,123,-113,38,40,-37,105,0,100,-102,-17,44,-2,24,104,-74,-96,111,73,39,62,-84,-43,-111,-16,126,112,109,111,-31,-18,27,119,-14,-81,69,-82,-38,80,-117,-118,118,63,41,48,87,-64,-38,26,-116,125,-127,63,74,-87,121,-16,-37,68,-69,82,22,6,-127,-67,81,-79,93,77,21,-73,44,123,1,-28,126,32,-8,91,121,-89,-85,77,98,-1,0,106,-120,114,83,-93,15,-15,-82,70,-57,80,-68,-48,-17,-106,123,105,30,-38,-26,51,-37,32,-3,13,125,21,92,95,-114,-68,11,22,-79,110,-9,118,104,35,-67,65,-110,-86,48,30,-71,-25,75,-105,-34,-122,-29,77,-89,116,117,31,14,126,37,65,-30,-69,113,109,118,-53,6,-91,24,-27,73,-64,-109,-36,87,121,95,31,-57,36,-42,55,27,-111,-102,25,-93,61,84,-32,-125,94,-77,-32,95,-116,18,-64,-79,-38,-21,7,-51,-121,-96,-97,-8,-105,-21,94,-66,27,58,-123,59,83,-59,105,-3,-17,-13,-1,0,51,-18,114,-118,-109,-52,34,-23,39,121,-57,91,119,94,94,104,-10,122,42,27,59,-56,111,-83,-46,123,121,22,88,-100,100,50,-98,42,106,-6,-92,-44,-107,-47,-34,-45,78,-52,40,-94,-118,98,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-82,51,-30,23,-113,35,-16,-67,-103,-73,-73,96,-38,-124,-125,-27,95,-18,15,83,92,-40,-100,77,60,37,39,90,-85,-78,70,-12,40,-49,17,81,83,-90,-82,-40,-66,59,-8,-123,111,-31,120,76,16,21,-98,-3,-121,-54,-96,-16,-98,-26,-68,55,81,-44,-82,-11,-69,-26,-72,-71,-111,-89,-98,67,-11,-4,5,71,36,-105,26,-83,-23,118,45,61,-52,-51,-55,-22,73,-81,69,-16,-89,-125,35,-46,-47,110,110,-44,73,116,121,11,-44,37,126,83,-118,-58,98,115,-86,-42,-38,11,-89,69,-2,108,-3,3,15,-122,-93,-106,83,-17,39,-3,125,-58,63,-122,-4,2,-41,1,46,53,15,-110,62,-94,30,-25,-21,93,-11,-75,-84,86,113,44,112,-58,-79,-94,-16,2,-118,-106,-118,-12,-24,97,-87,-31,-29,104,45,123,-100,-107,107,78,-77,-68,-126,-118,40,-82,-93,0,-94,-118,40,0,-81,58,-8,-75,-89,-106,75,75,-64,56,95,-112,-1,0,58,-12,90,-56,-15,86,-110,53,-83,18,-26,-33,25,125,-71,79,-83,76,-107,-43,-113,43,52,-61,60,86,18,116,-42,-10,-45,-43,30,117,-16,-69,84,22,62,32,48,-69,109,75,-123,-37,-8,-116,-102,-10,74,-7,-62,9,-91,-45,-17,18,69,-54,75,11,-25,-14,53,-17,126,27,-41,34,-15,6,-109,13,-44,103,-25,35,18,47,-93,119,-86,-95,45,57,79,-59,-51,74,40,-94,-70,-128,40,-94,-118,0,-14,-97,-118,62,25,22,119,43,-87,-37,-90,34,-108,-30,64,59,55,-83,112,-42,-78,121,114,99,-79,-81,-96,53,-35,53,53,125,38,-26,-43,-58,67,-95,-57,-44,114,43,-25,-37,-120,94,-50,-30,72,-100,124,-15,-79,82,61,-59,121,120,-86,42,73,-89,-77,59,-80,88,-87,-32,113,48,-60,83,-34,46,-1,0,-26,-114,-29,-63,126,58,-68,-16,-99,-56,80,76,-42,76,126,120,73,-3,69,123,-42,-117,-83,90,-21,-42,49,-35,-38,72,36,-115,-121,78,-29,-40,-41,-50,-105,90,27,127,100,-37,-22,86,-71,-110,-39,-41,-25,29,-48,-118,-73,-32,-33,24,92,-8,79,80,89,35,98,-42,-82,113,44,93,-120,-11,-6,-41,62,87,-101,85,-53,42,44,62,39,88,126,94,107,-56,-3,-45,21,-125,-91,-103,-47,88,-84,55,-60,-43,-3,127,-32,-97,71,-47,84,-12,-99,86,-33,90,-80,-118,-18,-43,-61,-61,32,-56,-25,-89,-79,-85,-107,-6,-108,101,25,-59,74,46,-23,-97,15,40,-72,-73,25,45,66,-118,40,-86,36,40,-94,-118,0,40,-94,-101,36,-117,12,108,-18,118,-94,-116,-110,123,80,6,55,-117,-68,77,7,-123,-76,-119,46,-91,57,-112,-115,-79,39,-9,-102,-66,117,-44,-75,27,-99,107,80,-110,-26,-31,-116,-109,-54,-39,-1,0,-21,10,-35,-8,-125,-30,-73,-15,62,-73,33,70,63,100,-124,-19,-119,123,125,106,-25,-128,124,55,-10,-103,63,-76,46,23,-9,104,127,118,-92,117,62,-75,-7,62,109,-115,-98,109,-118,-10,20,-97,-71,31,-23,-65,-14,63,66,-53,-16,-79,-53,-24,123,90,-97,19,-2,-84,108,-8,51,-62,-117,-91,-62,-73,119,42,13,-45,-116,-128,127,-124,87,87,69,21,-24,81,-91,26,48,80,-127,-51,82,-92,-86,75,-102,65,69,20,86,-58,97,69,20,80,1,69,20,80,1,69,20,80,7,-107,124,71,-16,-77,89,93,29,70,-35,51,4,-121,-9,-128,15,-70,125,107,23,-62,62,42,-101,-61,55,-63,-58,94,-39,-8,-110,63,111,81,94,-43,117,107,21,-28,15,12,-56,30,54,24,42,107,-55,60,93,-32,89,-12,89,94,-30,-43,12,-42,100,-25,11,-55,74,-58,81,113,124,-47,63,54,-49,50,121,82,-101,-60,-48,87,-117,-35,118,-1,0,-128,122,-34,-109,-84,90,-21,86,-117,113,107,40,-111,24,114,59,-113,99,87,107,-25,-99,35,92,-67,-48,-82,4,-74,-109,52,109,-35,123,31,-83,122,62,-121,-15,98,-42,-31,86,61,70,35,4,-97,-13,-47,121,83,93,16,-83,25,110,124,89,-33,-47,84,108,-75,-69,13,65,3,91,-35,-60,-32,-1,0,-76,1,-3,106,-16,33,-70,16,126,-121,53,-48,1,94,39,-15,35,77,26,127,-119,-90,101,24,73,-128,113,-11,-17,94,-39,-8,87,-101,-4,96,-79,-52,86,87,96,116,37,9,-4,-85,10,-54,-16,1,-65,10,-17,22,-21,79,-69,-80,-108,7,85,57,10,-34,-97,-28,-42,111,-116,60,46,-38,45,-63,-102,16,90,-46,67,-57,-5,39,-46,-86,124,49,-69,-5,63,-120,-116,125,-91,76,126,-94,-67,94,-6,-54,45,70,-42,72,38,93,-56,-29,28,-41,-105,95,15,28,77,43,117,91,31,-79,112,-50,50,75,7,31,45,14,15,-31,-73,-115,95,-61,122,-110,-37,92,62,108,38,56,96,79,-36,62,-75,-17,81,-56,-78,-58,-82,-121,114,-80,-56,35,-72,-81,-104,117,-51,30,77,23,80,-110,-35,-2,-17,84,111,81,94,-77,-16,-113,-58,7,82,-77,58,93,-45,-26,-30,1,-104,-55,-22,-53,-23,-6,-41,127,14,-26,82,-89,63,-88,87,-7,127,-105,-7,30,-50,115,-126,83,-113,-42,-23,124,-1,0,-52,-12,122,40,-94,-65,68,62,48,40,-94,-118,0,43,-126,-8,-71,-30,99,-93,-24,-94,-54,23,-37,113,117,-63,-57,80,-67,-21,-68,44,20,18,-57,10,57,53,-13,-105,-113,-75,-26,-41,-4,77,115,54,-20,-59,25,-14,-45,-24,56,63,-88,-81,-103,-30,12,107,-62,97,28,98,-3,-23,-23,-14,-22,123,-103,62,23,-21,24,-123,41,109,29,127,-56,-53,-47,116,-73,-43,-11,40,-83,-112,112,-57,44,125,5,123,37,-91,-84,118,86,-47,-63,16,-60,104,48,43,-109,-8,115,-93,-117,123,55,-66,-111,127,121,47,11,-12,-82,-54,-66,51,45,-95,-20,-23,115,-67,-27,-7,31,81,-116,-85,-49,62,85,-78,10,40,-94,-67,115,-128,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,41,25,67,-87,86,25,83,-63,6,-106,-118,0,-29,-4,65,-16,-30,-57,84,45,45,-73,-6,44,-25,-97,-108,124,-89,-16,-82,11,85,-16,46,-83,-91,-79,-51,-71,-98,63,-17,69,-51,123,109,24,7,-126,50,43,55,4,-49,-100,-58,100,56,76,83,114,75,-106,94,95,-28,124,-19,-5,-21,55,-1,0,-106,-112,63,-3,-14,106,-3,-81,-118,53,91,92,121,87,-13,1,-24,92,-102,-10,-21,-83,30,-50,-15,113,53,-76,79,-1,0,1,2,-78,46,126,31,-24,-73,60,-101,93,-121,-43,88,-1,0,-115,71,36,-106,-52,-7,-102,-68,47,94,63,-62,-102,126,-70,127,-103,-25,17,-4,66,-41,99,-57,-6,102,-17,-9,-106,-86,-21,30,46,-44,-75,-53,97,5,-28,-85,36,96,-18,0,46,43,-48,100,-8,91,-92,-71,-56,50,-89,-45,-1,0,-41,76,-1,0,-123,83,-91,127,-49,89,104,-27,-98,-41,56,-65,-43,-36,119,101,-9,-100,47,-127,-92,49,-8,-90,-57,31,-60,-8,-81,112,-82,119,66,-16,62,-99,-96,-36,125,-94,21,105,38,-20,-49,-38,-70,42,-72,69,-59,106,125,-74,75,-127,-85,-128,-96,-31,91,118,-18,115,126,54,-48,-122,-83,-90,-103,81,127,-46,33,27,-121,-72,-18,43,-50,-76,61,90,109,7,86,-73,-68,-120,-107,120,-97,-111,-22,59,-118,-10,-110,3,2,8,-56,-17,94,69,-29,13,31,-5,35,88,-111,84,126,-22,79,-99,127,-83,120,121,-115,55,78,113,-60,-45,-47,-81,-23,31,107,-124,-102,-100,93,25,-20,125,23,-91,-22,17,106,-70,125,-67,-36,39,116,115,40,97,86,-85,-52,126,10,-8,-128,-36,89,-36,105,114,-74,90,31,-98,60,-6,116,-57,-13,-81,78,-81,-44,-78,-4,90,-58,-31,-95,93,117,-33,-41,-87,-16,56,-52,59,-62,-41,-107,39,-45,-14,10,40,-94,-67,3,-116,-64,-15,-42,-83,-3,-117,-31,123,-39,-63,-61,-78,-7,107,-11,32,-41,-50,-106,-80,-67,-11,-36,113,-114,94,87,-2,124,-41,-83,124,111,-44,-116,118,54,86,42,127,-42,49,118,31,76,98,-72,63,0,-40,-3,-81,94,71,35,43,8,-35,95,-105,113,5,71,-118,-52,99,-121,91,70,-53,-17,-43,-97,123,-109,-45,-10,24,55,89,-18,-49,77,-79,-75,91,43,56,96,65,-123,-115,64,21,61,20,87,114,73,43,35,13,-11,10,40,-94,-104,-126,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-71,79,-120,122,88,-69,-46,69,-54,-113,-98,3,-97,-62,-70,-70,-81,-88,90,-117,-53,25,-32,97,-112,-22,69,97,94,-97,-75,-91,40,119,53,-89,63,103,53,35,-53,-4,9,-84,29,23,-59,22,115,-25,8,-51,-79,-2,-121,-113,-21,95,72,100,30,71,35,-75,124,-90,-22,-42,-105,68,116,104,-97,-7,28,-41,-46,-34,21,-44,6,-87,-31,-37,11,-100,-28,-76,74,15,-44,14,107,-85,-123,113,14,-43,48,-49,-90,-85,-14,103,38,127,69,94,21,-105,93,63,-56,-42,-94,-118,43,-17,-49,-112,60,43,-29,37,-31,-72,-15,80,-121,57,16,-60,-93,-13,31,-3,106,-109,-31,-115,-73,-18,110,-25,35,-110,66,-113,-54,-79,62,35,79,-10,-113,25,106,7,-80,109,-93,-16,-51,117,-97,14,-31,-14,-12,0,-35,-39,-13,-4,-21,-14,14,111,109,-102,-44,-101,-18,-1,0,-56,-3,29,47,103,-128,-124,87,100,117,20,81,69,123,-89,-102,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,120,-9,-117,109,69,-81,-120,46,-48,12,6,109,-62,-67,-125,-32,-11,-17,-38,-68,38,35,39,38,25,25,107,-52,126,34,-61,-27,-21,-95,-65,-65,30,127,83,93,-81,-64,-39,-13,103,-88,-61,-39,89,91,-13,-51,121,-71,36,-67,-114,108,-31,-34,-21,-11,58,115,69,-19,50,-11,46,-42,-1,0,35,-44,-88,-94,-118,-3,80,-8,19,-26,-81,27,18,-34,42,-44,-55,-28,-7,-52,63,83,93,-9,-127,87,111,-122,-19,-49,-82,127,-103,-82,11,-57,49,-104,-4,89,-87,-81,-3,53,99,-6,-102,-18,-4,7,38,-17,14,66,63,-70,72,-3,77,126,59,-123,-1,0,126,-85,127,63,-52,-3,42,-73,-5,-83,59,121,126,71,67,69,20,87,-48,30,80,81,69,20,0,81,69,20,0,81,69,20,0,81,69,20,0,81,69,20,0,81,69,20,0,81,69,20,0,81,69,20,0,81,69,20,0,81,69,20,0,81,69,20,1,-25,31,19,20,127,105,91,30,-5,63,-58,-70,47,-127,-116,126,-47,-87,12,-15,-123,-2,-75,-51,-4,74,-109,118,-83,2,-1,0,118,63,-22,107,-89,-8,25,31,-51,-87,-55,-2,-24,-2,117,-27,101,-70,-25,81,-73,119,-7,29,-104,-17,-7,22,-53,-27,-7,-98,-75,69,20,87,-22,-25,-25,-57,-49,95,20,45,-66,-51,-29,59,-50,-37,-64,97,-8,-26,-70,15,-122,-13,121,-102,44,-111,-25,-108,122,-113,-29,109,-127,-121,92,-75,-70,3,-27,-106,61,-92,-3,0,-84,-17,-122,119,123,110,110,-83,-55,-5,-61,112,-81,-56,-86,-57,-22,-7,-75,72,62,-83,-2,58,-97,-93,83,-105,-74,-53,-31,47,37,-8,104,122,21,20,81,94,-39,-25,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,5,20,82,51,109,82,79,64,51,64,30,85,-29,-21,-113,59,-60,82,-88,57,8,-69,107,-47,126,8,-38,-104,-12,75,-71,-56,-5,-14,-32,126,4,-41,-110,-21,119,95,109,-43,110,-26,-21,-71,-50,43,-34,62,24,105,-1,0,96,-16,125,-96,35,13,33,50,31,-57,6,-68,-2,31,-113,-74,-52,-27,87,-94,77,-2,-121,70,111,47,103,-127,-116,59,-40,-22,-24,-94,-118,-3,72,-8,35,-128,-8,-55,-91,-101,-49,13,-91,-54,-116,-75,-68,-128,-97,-95,-1,0,-11,87,-110,-8,78,-1,0,-5,63,93,-74,-112,-100,35,29,-83,-12,-81,-94,-11,-83,53,117,109,38,-22,-47,-58,68,-79,-107,31,92,113,95,50,94,91,-55,-89,-33,75,3,124,-78,68,-28,126,70,-65,51,-30,90,46,-122,46,24,-88,-11,-4,-41,-4,3,-18,114,74,-86,-82,30,84,31,79,-55,-98,-29,69,101,-8,111,84,93,91,71,-126,96,114,-8,-38,-33,90,-44,-83,-31,37,56,-87,45,-103,50,-117,-117,113,97,69,20,85,-110,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,21,-107,-30,109,64,105,-70,45,-52,-71,-61,109,-38,-65,90,-43,-81,63,-8,-109,-86,-7,-110,-61,98,-115,-62,-4,-17,-2,127,26,-29,-59,-43,-10,52,101,35,-94,-123,63,105,81,68,-29,-12,-5,102,-66,-65,-73,-127,126,102,-110,64,63,90,-6,127,77,-76,22,26,125,-67,-78,-12,-118,53,79,-56,87,-121,-4,36,-48,-1,0,-75,60,74,46,29,115,13,-86,-18,39,-36,-15,94,-13,94,-73,11,97,-100,40,79,16,-2,-45,-78,-12,95,-16,79,51,62,-81,-51,86,52,87,79,-44,40,-94,-118,-5,-125,-27,66,-68,67,-29,7,-121,63,-77,117,-108,-44,34,76,65,116,62,108,118,111,-14,43,-37,-21,23,-59,-34,31,-113,-60,-70,29,-59,-101,15,-34,17,-104,-37,-47,-85,-58,-51,-16,63,95,-62,74,-102,-8,-106,-85,-41,-2,9,-23,-27,-40,-81,-86,98,20,-34,-49,70,120,-57,-61,-35,104,89,-33,53,-100,-83,-120,-26,-27,115,-39,-85,-46,107,-61,-26,-122,125,46,-7,-93,112,99,-98,23,-63,30,-124,87,-84,120,95,92,77,115,77,71,-56,-13,-112,109,-111,125,-3,107,-13,-100,-74,-66,-114,-124,-9,71,-37,99,41,106,-86,-57,102,108,81,69,21,-18,-98,88,81,69,20,0,81,69,20,0,81,69,20,0,-116,-63,84,-110,112,7,82,106,-67,-66,-91,107,117,33,72,110,35,-111,-57,85,86,4,-43,63,20,67,113,113,-95,-36,-91,-74,124,-36,116,94,-92,119,-81,57,-16,-99,-107,-23,-41,-83,-52,105,34,-20,111,-100,-98,-128,123,-41,-99,95,21,42,53,99,77,70,-9,58,-23,81,85,33,41,57,90,-57,-83,-44,55,55,-112,89,-88,105,-27,72,-105,-43,-114,42,106,-13,-1,0,-119,22,-73,114,93,-63,42,-85,-75,-74,-36,124,-67,1,-83,-15,53,-99,10,110,105,92,-50,-115,53,82,106,45,-40,-17,33,-72,-114,-26,48,-15,58,-56,-121,-8,-108,-28,84,-107,-57,-4,57,-74,-70,-122,-58,118,-103,89,98,102,-7,3,87,97,87,66,-93,-83,77,77,-85,92,-102,-112,84,-26,-30,-99,-62,-118,40,-83,-52,-126,-118,40,-96,2,-118,40,-96,10,-6,-123,-14,105,-42,114,-36,72,112,-79,-116,-1,0,-11,-85,-58,53,27,-41,-44,111,-91,-72,115,-106,-111,-65,-3,85,-43,-4,64,-15,0,-71,-104,105,-16,54,99,-116,-26,66,59,-97,74,-87,-16,-17,-62,-19,-30,77,122,32,-21,-2,-117,1,-33,33,-19,-12,-81,-100,-59,57,-29,-79,17,-62,-47,-41,91,124,-1,0,-32,30,-67,21,28,45,25,87,-88,122,-73,-62,-1,0,14,-1,0,97,-8,110,55,-111,113,113,115,-5,-57,-6,122,126,-107,-40,-46,42,-124,80,-86,48,-93,-128,5,45,126,-71,-123,-61,-57,11,70,52,97,-76,81,-7,-43,122,-46,-81,82,85,101,-69,10,40,-94,-70,76,2,-118,40,-96,15,41,-8,-69,-32,-78,-1,0,-15,57,-77,-113,39,-92,-22,-93,-1,0,30,-81,57,-16,-18,-71,38,-123,-88,36,-54,115,17,-31,-41,-44,87,-45,51,66,-105,16,-68,82,40,120,-36,109,101,61,-59,120,39,-60,79,3,73,-31,-117,-26,-72,-73,82,-38,124,-89,42,-33,-36,62,-122,-65,56,-49,-14,-55,97,-22,125,123,14,-76,-21,-28,-5,-4,-6,-97,107,-108,99,-93,86,31,84,-83,-65,79,63,35,-65,-78,-68,-117,80,-74,73,-31,96,-56,-61,53,61,121,71,-124,-4,80,-6,29,-57,-105,33,47,104,-25,-26,95,-18,-5,-118,-11,43,107,-104,-17,33,89,97,112,-15,-80,-56,96,107,-101,11,-118,-114,38,23,-21,-44,-22,-81,69,-47,-105,-111,45,20,81,93,-57,40,81,69,20,0,81,69,121,-1,0,-116,124,89,127,103,-85,53,-83,-76,-98,74,71,-33,28,-102,-26,-60,98,35,-121,-121,60,-51,-87,82,-107,105,114,-60,-12,10,69,69,94,66,-128,125,-123,98,-8,67,88,-105,90,-46,86,105,-57,-17,21,-74,-106,29,-21,98,105,4,49,59,-98,-118,51,90,83,-87,26,-112,83,91,50,37,23,9,56,-67,-57,-46,50,-122,-32,-116,-113,122,-13,119,-8,-117,127,-3,-95,-107,68,22,-5,-15,-77,28,-29,-21,94,-117,109,48,-71,-73,-114,80,48,29,67,126,117,-115,12,85,60,69,-44,58,26,-44,-93,58,54,114,-22,72,0,94,0,-64,-94,-80,-4,89,-81,62,-125,-89,-119,34,80,-45,57,-38,-71,-24,43,31,-62,30,50,-70,-43,-81,-51,-83,-40,82,88,101,89,70,40,-106,42,-100,42,-86,47,118,17,-93,57,65,-44,91,29,-91,20,81,93,103,56,81,69,20,0,87,59,-29,15,18,46,-117,102,98,-119,-77,117,32,-64,31,-35,30,-75,107,-60,-98,36,-121,65,-75,37,-114,-5,-122,31,36,127,-42,-68,-98,-6,-10,109,78,-19,-26,-103,-116,-110,-56,127,-56,21,-29,-29,-79,-118,-118,-10,112,-8,-97,-32,122,24,92,63,-76,124,-14,-40,75,123,121,-11,43,-60,-118,48,-46,-36,76,-40,30,-92,-102,-6,35,-64,-2,23,-113,-62,-70,44,112,1,-101,-119,6,-7,91,-44,-6,87,49,-16,-73,-64,63,-39,112,-82,-85,125,31,-6,84,-125,49,35,127,0,-11,-6,-41,-92,87,-45,112,-10,84,-16,-48,-6,-43,101,-17,-53,111,37,-2,108,-16,51,-116,-63,86,-105,-80,-92,-3,-43,-65,-101,10,40,-94,-66,-48,-7,-112,-94,-118,40,0,-94,-118,40,0,-86,-38,-106,-101,111,-85,89,-55,107,117,24,-110,25,6,8,34,-84,-47,74,81,82,78,50,87,76,105,-72,-69,-83,-49,-98,-68,113,-32,59,-81,10,93,51,-94,-76,-74,14,126,73,0,-5,-66,-58,-88,120,111,-59,55,26,12,-37,121,-106,-39,-66,-12,103,-73,-72,-81,-93,111,108,-96,-44,45,-98,-34,-30,53,-106,39,24,101,106,-15,127,28,124,45,-72,-47,89,-17,52,-43,107,-117,50,114,99,31,121,43,-13,76,-45,36,-85,-126,-101,-60,-32,-75,-113,110,-85,-4,-47,-9,24,12,-46,-98,38,62,-61,19,-15,119,-17,-1,0,4,-22,-12,-67,90,-37,87,-73,19,91,72,28,30,-85,-36,85,-54,-15,45,63,82,-70,-46,110,4,-106,-14,52,78,58,-113,-24,107,-48,116,31,31,91,95,-123,-118,-13,-3,30,126,-101,-65,-124,-41,22,27,48,-123,95,118,-90,-113,-16,59,43,97,37,79,88,106,-114,-78,-118,108,114,44,-86,25,24,58,-98,-22,115,78,-81,88,-13,-62,-79,-11,-113,10,-40,107,114,-84,-73,8,68,-125,-8,-105,-67,108,81,81,56,70,-94,-27,-102,-70,42,50,-108,93,-30,-20,87,-80,-80,-121,77,-75,72,45,-45,100,107,-48,84,-20,-95,-108,-126,50,15,6,-106,-118,-92,-108,85,-112,-101,109,-35,-100,-84,-97,15,108,30,-1,0,-19,27,-36,38,-19,-34,87,108,-41,80,-120,35,69,69,24,85,24,2,-99,69,103,78,-115,58,87,-28,86,-71,114,-87,57,-37,-103,-34,-59,29,99,71,-125,91,-77,54,-13,-113,-105,-88,97,-44,26,-49,-16,-1,0,-124,45,116,25,-102,100,118,-106,82,49,-71,-69,10,-34,-94,-121,70,-100,-90,-86,53,-86,5,82,106,60,-119,-24,20,81,85,-17,53,11,125,62,35,37,-60,-85,26,-114,121,60,-42,-83,-88,-85,-78,18,111,68,88,-82,119,-60,-98,48,-73,-47,99,104,-30,34,107,-93,-47,71,69,-9,53,-50,-8,-125,-30,4,-105,1,-96,-45,-63,-115,58,25,79,83,-12,-82,78,-42,-42,-25,85,-70,17,66,-113,113,60,-121,-80,-55,-81,15,19,-104,107,-20,-16,-6,-66,-1,0,-28,122,116,112,-97,110,-82,-120,47,47,103,-44,-18,-102,89,-103,-92,-111,-113,31,-32,43,-44,-66,27,124,53,-39,-27,-22,-102,-84,127,55,88,-96,110,-34,-26,-76,-68,7,-16,-74,45,31,101,-10,-90,22,107,-66,-85,31,-16,-89,-1,0,94,-67,18,-66,-117,39,-56,92,100,-79,88,-59,-82,-23,126,-81,-4,-113,15,50,-51,-108,-109,-95,-122,122,117,127,-28,29,56,3,2,-118,40,-81,-67,62,72,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,32,48,32,-116,-125,-63,-94,-118,0,-31,124,93,-16,-82,-57,94,-33,113,101,-117,59,-61,-49,-54,62,70,62,-30,-68,127,94,-16,-82,-91,-31,-39,-118,94,-37,50,-88,60,72,-93,42,127,26,-6,106,-95,-70,-77,-126,-10,35,28,-15,36,-56,122,-85,-116,-41,-53,102,28,63,-121,-58,94,116,-3,-55,-7,108,-3,81,-17,96,-13,-118,-40,107,66,126,-12,127,19,-26,-99,39,-60,-73,-6,67,15,34,114,-47,-1,0,113,-71,21,-40,-23,127,18,45,-90,-62,-34,-60,-48,-73,-9,-105,-111,93,71,-120,62,14,-23,-38,-117,60,-74,18,53,-108,-89,-99,-67,86,-68,-13,90,-8,103,-82,-24,-27,-119,-74,55,49,15,-29,-121,-102,-8,-54,-72,12,-49,45,-23,-51,31,45,87,-7,-93,-23,-23,-30,-16,56,-34,-74,126,122,51,-48,44,-11,-85,27,-11,6,11,-104,-37,61,-73,0,106,-16,-25,-111,-56,-81,12,-110,57,-84,-28,-38,-21,36,46,59,114,42,-35,-81,-120,53,27,76,121,119,114,1,-24,78,127,-99,99,12,-42,-38,84,-127,-76,-80,55,-42,18,61,-94,-116,-41,-107,67,-29,-19,90,30,12,-117,39,-5,-64,127,-123,88,31,18,53,47,-7,-25,25,-82,-107,-102,80,123,-33,-18,48,120,42,-66,71,-90,-26,-118,-13,38,-8,-113,-87,-111,-62,70,13,83,-72,-15,-50,-81,62,71,-98,16,127,-78,7,-8,80,-13,74,11,107,-115,96,-86,-11,-79,-21,12,-62,49,-106,33,71,-5,92,86,93,-1,0,-118,52,-35,56,31,54,-27,89,-65,-70,-121,38,-68,-98,-25,88,-67,-70,-49,-101,115,35,123,103,20,-106,122,101,-26,-91,32,91,123,121,110,24,-1,0,116,102,-71,101,-102,74,111,-106,-116,53,55,88,40,-59,94,-92,-114,-69,85,-8,-112,-17,-108,-79,-121,96,-1,0,-98,-113,-2,21,-56,94,-22,55,58,-100,-37,-82,37,105,-104,-98,1,63,-56,87,103,-95,-4,31,-43,-75,18,-81,120,86,-58,35,-3,-17,-67,94,-111,-31,-33,-122,-70,63,-121,-10,-72,-117,-19,83,-113,-7,105,40,-49,-23,-46,-69,40,-27,25,-114,98,-45,-85,-18,-57,-49,-4,-114,74,-71,-114,11,6,-83,79,-34,126,95,-26,121,87,-123,-2,25,-22,-98,34,101,-110,72,-51,-99,-89,83,36,-125,4,-113,97,94,-55,-31,-97,6,-23,-34,22,-128,45,-84,91,-90,-2,41,-97,-106,53,-72,-86,21,64,80,20,118,0,96,82,-41,-36,-27,-7,54,27,47,-9,-94,-71,-89,-35,-2,-99,-113,-108,-58,102,85,-15,-102,55,104,-10,65,69,20,87,-68,121,33,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,5,43,-19,18,-61,82,82,46,109,34,-101,63,-34,90,-25,47,-66,20,-8,122,-16,-110,45,76,7,-2,-103,-100,87,97,69,114,86,-63,-31,-21,-1,0,22,-102,127,35,-90,-98,38,-75,31,-31,-51,-81,-103,-26,-41,31,4,116,-42,-49,-107,121,52,127,-17,16,127,-91,82,127,-127,113,-1,0,14,-90,113,-18,63,-6,-43,-22,-44,87,-103,44,-117,46,-105,-4,-70,95,-119,-37,28,-41,25,31,-7,121,-7,30,87,31,-64,-56,127,-113,83,99,-12,31,-3,106,-48,-75,-8,41,-92,-58,65,-102,-30,105,-65,17,-113,-27,94,-119,69,84,114,60,-66,27,82,95,-120,-91,-102,99,37,-1,0,47,14,99,79,-8,109,-31,-3,60,-126,-74,11,35,15,-30,-109,-102,-24,109,-20,-32,-77,80,-80,66,-111,47,-94,-118,-102,-118,-11,41,97,-88,-48,-46,-108,20,125,17,-63,82,-75,90,-65,-60,-109,127,48,-94,-118,43,-96,-60,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,-1,-39],\"isON\":false,\"needSeat\":false},\"event_class\":{\"myArrayList\":[\"1\",\"3\",\"5\"]},\"ticket\":[{\"ticket_name\":\"xxx\",\"ticket_price\":\"123\",\"ticket_quantity\":\"444\",\"start_date\":\"2022-12-05 16:00:22\",\"end_date\":\"2022-12-31 17:15:27\",\"ticket_min\":\"1\",\"ticket_max\":\"10\",\"record\":0},{\"ticket_name\":\"xxx2\",\"ticket_price\":\"123\",\"ticket_quantity\":\"444\",\"start_date\":\"2022-12-05 16:00:22\",\"end_date\":\"2022-12-31 17:15:27\",\"ticket_min\":\"1\",\"ticket_max\":\"10\",\"record\":2}]}";
//			String alldata ="{\"page1\":{\"organizerNumber\":1,\"eventName\":\"tet\",\"eventStartDate\":\"2022-12-10 17:09:05\",\"eventEndDate\":\"2022-12-31 17:09:09\",\"peopleNumber\":100,\"eventPlace\":\"test palce1\",\"eventP2\":\"台灣新北市樹林區太平路56巷兩儀堂足體養生工作坊\",\"eventSummary\":\"xxxx12\",\"bigImg\":[-1,-40,-1,-32,0,16,74,70,73,70,0,1,1,1,0,-112,0,-112,0,0,-1,-37,0,67,0,3,2,2,3,2,2,3,3,3,3,4,3,3,4,5,8,5,5,4,4,5,10,7,7,6,8,12,10,12,12,11,10,11,11,13,14,18,16,13,14,17,14,11,11,16,22,16,17,19,20,21,21,21,12,15,23,24,22,20,24,18,20,21,20,-1,-37,0,67,1,3,4,4,5,4,5,9,5,5,9,20,13,11,13,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,-1,-64,0,17,8,1,24,0,-51,3,1,34,0,2,17,1,3,17,1,-1,-60,0,31,0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,-1,-60,0,-75,16,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125,1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,-127,-111,-95,8,35,66,-79,-63,21,82,-47,-16,36,51,98,114,-126,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,-125,-124,-123,-122,-121,-120,-119,-118,-110,-109,-108,-107,-106,-105,-104,-103,-102,-94,-93,-92,-91,-90,-89,-88,-87,-86,-78,-77,-76,-75,-74,-73,-72,-71,-70,-62,-61,-60,-59,-58,-57,-56,-55,-54,-46,-45,-44,-43,-42,-41,-40,-39,-38,-31,-30,-29,-28,-27,-26,-25,-24,-23,-22,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-1,-60,0,31,1,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,-1,-60,0,-75,17,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119,0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,-127,8,20,66,-111,-95,-79,-63,9,35,51,82,-16,21,98,114,-47,10,22,36,52,-31,37,-15,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,-126,-125,-124,-123,-122,-121,-120,-119,-118,-110,-109,-108,-107,-106,-105,-104,-103,-102,-94,-93,-92,-91,-90,-89,-88,-87,-86,-78,-77,-76,-75,-74,-73,-72,-71,-70,-62,-61,-60,-59,-58,-57,-56,-55,-54,-46,-45,-44,-43,-42,-41,-40,-39,-38,-30,-29,-28,-27,-26,-25,-24,-23,-22,-14,-13,-12,-11,-10,-9,-8,-7,-6,-1,-38,0,12,3,1,0,2,17,3,17,0,63,0,-5,-94,-118,40,-81,-51,15,-48,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-116,-1,0,-100,-41,-119,-2,-42,-98,56,-41,60,15,-16,-67,-89,-48,-34,72,39,-72,-103,97,-110,-26,33,-52,106,78,15,-45,53,-14,-9,-64,-97,-38,99,92,-16,39,-119,-29,-117,93,-44,46,53,77,14,-23,-62,-50,39,108,-76,121,-2,33,-2,123,-43,-88,-74,-82,77,-20,-49,-48,-38,42,-74,-101,-88,91,-22,-42,48,94,90,74,-77,-37,76,-127,-29,-111,78,67,3,86,106,10,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,51,60,73,-31,-67,63,-59,-102,45,-42,-107,-87,-64,-73,22,87,40,81,-47,-122,122,-116,100,123,-41,-26,-97,-57,47,-124,-9,127,8,-4,109,113,-90,72,-84,-42,19,19,45,-92,-60,112,-56,123,126,25,-57,-31,95,-89,-11,-30,-97,-75,127,-61,56,-4,123,-16,-50,-22,-18,24,-125,106,122,88,-5,68,44,7,-52,84,103,43,-6,-43,-59,-39,-109,37,116,121,-57,-20,79,-15,121,-11,43,57,-68,21,-87,78,94,107,101,-13,44,89,-49,37,59,-81,-31,-126,107,-21,42,-4,-94,-8,111,-30,-53,-113,3,-8,-29,72,-42,45,-36,-93,91,-36,40,127,117,39,107,15,-56,-102,-3,83,-46,-11,40,-75,-115,54,-42,-2,3,-104,110,98,89,-112,-113,70,25,-89,53,102,17,122,22,-88,-94,-118,-52,-96,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-88,-82,-19,-110,-14,-42,107,121,87,116,114,-95,70,7,-72,34,-91,-96,-48,7,-27,31,-60,-17,14,55,-124,126,32,107,-38,78,-35,-126,-38,-27,-107,7,-73,81,95,-96,127,-78,-33,-119,27,-60,-33,5,-12,73,100,125,-14,-37,3,108,-57,-3,-64,0,-81,-112,127,108,13,53,108,126,55,-22,-116,-117,-123,-72,65,39,-29,-110,63,-91,125,1,-5,9,-33,53,-57,-61,93,78,-36,-100,-120,47,14,6,125,73,-1,0,10,-38,90,-58,-26,113,-47,-97,75,-47,85,103,-43,45,45,-77,-26,-35,67,31,-5,-46,1,85,-1,0,-31,37,-46,119,109,-2,-47,-74,-49,-3,117,21,-50,-25,21,-69,41,-54,43,118,105,81,85,-19,-11,11,107,-81,-11,55,17,75,-2,-29,-125,86,58,117,24,-86,-70,123,15,125,-126,-118,40,-96,97,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,81,92,-35,67,103,11,75,60,-117,20,107,-55,102,56,21,-115,-30,-1,0,24,89,120,67,77,107,-101,-106,-35,33,-1,0,87,8,63,51,-102,-7,-25,-59,126,57,-44,-4,89,116,-49,115,51,37,-66,126,72,16,-31,86,-68,-68,102,62,-98,23,-35,-34,93,-113,55,21,-114,-122,23,-35,-34,93,-113,102,-42,-2,51,104,58,91,52,112,59,95,72,63,-25,-112,27,107,-108,-70,-3,-96,39,-49,-6,62,-105,24,31,-12,-47,-115,121,-42,-113,-31,61,83,92,35,-20,-74,-114,-55,-3,-10,-32,126,-75,-43,-38,-4,25,-44,-92,80,103,-69,-122,19,-23,-126,107,-25,101,-103,98,-22,63,117,-39,30,20,-79,-8,-70,-82,-15,-48,-14,31,-118,94,25,-113,-30,-57,-115,27,94,-44,-28,-5,63,-18,-60,98,8,121,4,2,79,95,-58,-75,60,37,105,-1,0,8,62,-103,45,-122,-113,44,-106,-106,-14,-74,-23,2,-79,-53,31,92,-42,-90,-79,-89,29,35,84,-71,-77,103,18,24,91,110,-31,-34,-69,-81,4,-8,51,77,-44,116,-104,-81,110,99,105,-92,98,126,82,120,-82,119,-119,-59,98,95,36,-90,-49,58,-74,46,-76,-66,57,51,-49,-28,-70,-71,-72,108,-68,-13,72,125,-35,-115,55,100,-3,113,47,-41,38,-67,-38,-33,67,-45,-19,20,8,-84,-30,65,-12,-85,63,101,-121,110,60,-92,-57,-46,-105,-43,27,-34,71,3,-84,120,36,55,-9,118,108,12,87,51,68,-61,-47,-40,87,95,-31,-33,-117,-70,-26,-122,-54,-77,74,47,-83,-5,-92,-67,127,58,-17,-17,60,59,-90,-22,10,86,107,56,-37,-33,28,-41,23,-30,15,-122,62,90,60,-38,99,-25,28,-7,45,-3,42,-93,10,-8,119,-51,74,70,-12,-79,83,-90,-17,25,52,122,-41,-125,-2,33,-23,126,46,-116,44,15,-28,-35,-127,-106,-73,126,15,-31,93,77,124,-121,20,-73,90,69,-22,-70,23,-74,-71,-119,-78,15,66,13,123,-17,-61,47,-119,9,-30,-85,97,103,120,-63,53,40,-57,115,-2,-80,122,-3,107,-24,48,57,-105,-73,126,-54,-82,-110,-4,-49,-83,-63,102,10,-69,-10,117,52,-105,-26,119,-12,81,69,123,-89,-74,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,21,94,-2,-6,45,54,-50,107,-87,-40,36,49,41,118,39,-48,85,-118,-14,-1,0,-114,94,36,54,58,60,26,92,77,-119,46,78,-25,-57,-9,71,-1,0,-82,-71,-15,21,-106,30,-108,-86,62,-121,62,34,-78,-95,74,85,31,67,-54,60,105,-30,-85,-113,22,107,115,93,74,-57,-54,82,86,36,-20,-85,93,87,-61,-65,-121,-119,127,26,106,90,-110,102,19,-52,80,-97,-30,-9,53,-55,120,55,65,62,34,-41,-83,-19,113,-5,-96,119,72,127,-39,21,-12,44,48,-91,-68,73,28,106,21,20,96,40,-19,95,5,27,-43,-109,-87,61,91,62,58,-108,93,105,58,-109,-44,33,-119,45,-29,17,-60,-117,28,107,-64,85,24,20,-22,40,-82,-125,-72,-7,-1,0,-30,21,-87,-75,-15,118,-96,-92,99,115,-18,21,-36,124,50,-71,19,120,116,-57,-98,99,-112,-2,-75,-109,-15,-109,75,48,-22,-106,-41,-54,-65,44,-53,-76,-97,113,-109,84,-2,22,-22,-126,-33,80,-102,-51,-50,4,-61,114,-3,69,99,69,-14,86,60,44,68,108,-38,61,66,-118,40,-81,88,-13,-62,-118,40,-96,14,79,-58,-34,15,-113,90,-74,107,-101,117,11,121,24,-49,3,-17,-118,-14,-19,62,-2,-25,69,-44,98,-71,-127,-102,43,-120,95,35,-73,35,-79,-81,125,-81,43,-8,-111,-31,-15,-89,-33,45,-12,43,-120,102,-5,-40,-20,-43,-25,-30,41,-14,-2,-14,59,-99,20,-90,-45,-79,-18,-34,14,-15,44,62,42,-48,-96,-67,-120,-4,-60,109,-111,125,26,-74,-21,-64,126,10,-8,-96,-23,122,-15,-45,101,124,91,-35,-16,-71,-24,31,-4,-26,-67,-6,-66,-69,3,-120,-6,-51,21,55,-65,83,-12,44,30,35,-21,20,84,-98,-3,66,-118,40,-82,-13,-72,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,43,-26,-81,-118,-38,-63,-42,60,101,119,-125,-104,-32,-3,-46,-2,25,6,-66,-118,-43,-82,-42,-57,77,-70,-72,99,-127,28,76,-39,-4,43,-28,-69,-21,-106,-65,-66,-72,-100,-14,-13,72,-49,-7,-102,-7,-52,-22,-91,-95,26,107,-82,-89,-49,-26,-11,45,8,-45,-18,122,-89,-63,-83,39,-54,-79,-70,-44,25,126,105,27,98,-3,63,-56,-81,72,-84,111,7,-23,-61,75,-16,-35,-108,24,-63,-39,-71,-65,30,127,-83,108,-41,-123,5,104,-92,112,83,-113,44,18,10,40,-94,-84,-48,-25,124,121,-96,-1,0,-62,65,-31,-23,-30,81,-103,-93,30,98,126,29,127,65,94,15,103,117,54,-105,125,28,-23,-108,-102,38,-50,62,-99,-85,-23,-86,-15,-33,-119,-34,11,109,54,-19,-75,59,68,-51,-84,-89,50,42,-113,-72,-34,-75,-49,86,63,105,28,88,-118,119,-9,-111,-37,-24,58,-60,58,-26,-99,21,-52,76,9,35,12,-67,-63,-83,26,-15,15,12,-8,-102,-29,-61,-73,-126,72,-50,-8,91,-17,-57,-40,-41,-81,104,-70,-19,-90,-69,110,-78,-37,72,24,-29,-26,79,-30,31,-123,119,-47,-84,-86,43,61,-49,14,112,-27,102,-115,20,81,93,38,97,89,62,40,-46,-41,87,-47,46,96,35,45,-73,114,-3,69,107,81,-11,-23,73,-82,101,102,51,-25,-21,91,-119,52,-37,-24,-26,66,86,88,100,-56,-6,-125,95,87,-24,58,-110,107,26,61,-99,-22,28,-119,-93,13,95,48,-8,-69,79,-2,-51,-15,5,-36,64,97,75,110,31,-113,53,-19,63,4,117,99,125,-31,67,108,-51,-106,-75,-109,111,-31,-127,-2,52,101,21,29,58,-46,-92,-6,-2,-121,-43,-27,21,109,81,-61,-70,61,18,-118,40,-81,-82,62,-80,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,-32,-66,50,-21,-97,-39,62,19,120,17,-79,45,-45,108,30,-72,24,53,-31,-98,20,-46,-50,-83,-81,-39,91,1,-112,100,4,-3,1,-26,-70,-81,-116,-34,34,-2,-40,-15,57,-76,-115,-73,65,102,54,12,116,-35,-33,-7,-43,-17,-125,122,38,-23,-82,117,55,94,20,121,105,-6,-26,-66,31,31,87,-21,24,-90,-106,-53,67,-29,-79,-107,62,-79,-118,-78,-39,104,122,-94,32,-115,21,7,1,64,81,-8,113,75,69,21,-111,-80,81,69,20,0,84,119,22,-15,-35,66,-15,76,-117,36,110,48,-54,-61,-125,82,81,64,30,59,-29,79,-122,51,-23,-78,73,119,-90,43,79,106,78,90,49,-9,-109,-1,0,-83,92,61,-91,-19,-50,-103,113,-66,9,30,9,20,-10,-29,-12,-81,-90,-85,-102,-15,7,-61,-3,43,-60,27,-99,-30,-5,61,-63,-1,0,-106,-79,-16,127,26,-25,-107,61,111,19,-118,-90,30,-6,-64,-13,-3,31,-30,-108,-79,5,77,66,15,52,14,60,-60,-21,93,101,-113,-114,52,123,-32,54,-35,44,108,127,-122,78,13,114,58,-57,-62,61,82,-56,-77,90,58,94,71,-40,14,27,-11,-82,71,80,-47,111,-76,-90,-59,-35,-76,-112,-116,-29,44,56,-4,-22,-107,122,-80,-8,-75,60,-39,-31,-38,-35,88,-9,72,-81,-83,-89,25,-114,120,-36,123,26,-105,112,61,8,63,-115,124,-10,-77,60,127,117,-39,126,-122,-89,93,86,-14,63,-69,117,42,-1,0,-64,-85,85,-116,-18,-116,125,-105,-103,-41,-4,84,-77,-14,-11,75,107,-128,63,-42,38,13,116,63,0,111,74,-22,26,-107,-87,60,50,7,3,-33,63,-3,106,-14,-69,-117,-23,-17,49,-25,-50,-45,109,-23,-72,-12,-81,66,-8,20,-110,-1,0,-62,87,51,-86,-73,-107,-28,-4,-51,-114,59,-43,-32,-22,95,25,9,46,-84,-11,114,-5,-61,17,4,123,-11,20,-117,-48,82,-41,-35,-97,118,20,81,69,0,20,81,69,0,20,81,69,0,21,-121,-29,63,16,39,-122,124,59,119,122,-57,14,-85,-120,-57,-85,86,-27,120,39,-58,-81,22,127,107,106,-55,-91,-37,-55,-101,107,95,-65,-114,-123,-65,-55,-82,12,118,33,97,-88,-71,117,122,35,-121,25,-120,-6,-67,23,46,-67,15,60,38,109,78,-5,39,47,60,-14,115,-18,73,-81,-95,-68,47,-93,-82,-125,-95,-38,-38,1,-122,85,-53,-1,0,-68,71,53,-27,-65,10,60,55,-3,-89,-85,53,-12,-53,-104,45,-66,-17,-95,106,-10,-118,-8,-102,75,-19,51,-27,-80,-15,-47,-51,-11,18,-118,40,-82,-125,-80,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,43,19,-58,-102,40,-15,7,-121,-18,-83,-15,-70,80,-69,-93,62,-30,-74,-24,-92,-43,-43,-124,-41,50,-77,62,98,-123,-51,-99,-30,51,-96,99,27,-115,-56,-61,-114,15,34,-66,-116,-48,124,45,-31,-97,18,104,-74,-73,-55,-90,64,68,-56,11,109,80,48,-40,-28,116,-81,30,-8,-99,-31,-17,-20,93,121,-25,-115,49,111,117,-13,-81,-96,62,-107,-43,-4,13,-15,87,-109,113,46,-117,59,-31,95,-9,-112,-28,-9,-18,63,-107,116,101,-77,-124,43,123,42,-118,-23,-2,102,120,9,70,-99,103,74,-94,-70,103,-95,-113,-122,-66,28,7,63,-39,113,-2,67,-4,43,103,75,-48,-20,52,88,-39,44,109,99,-74,86,-21,-79,64,38,-81,81,95,99,26,52,-32,-17,24,-92,125,92,105,66,46,-15,-118,65,69,20,86,-90,-95,69,20,80,1,69,20,80,1,69,20,-39,28,70,-116,-20,112,-86,50,79,-75,0,115,-97,16,60,82,-98,21,-16,-20,-9,59,-65,-46,28,20,-123,123,-18,61,-1,0,10,-7,-98,53,-97,86,-65,10,51,37,-60,-17,-11,36,-109,93,87,-59,31,23,31,20,120,-127,-42,39,-51,-107,-79,41,24,-49,4,-9,63,-91,108,124,35,-16,-65,-99,59,106,-13,-89,-55,31,-53,8,35,-87,-11,-81,-120,-57,-30,62,-75,95,-106,63,10,-2,-82,124,118,50,-77,-59,87,-27,-113,-62,-65,-85,-98,-123,-31,109,10,63,14,-24,-74,-10,104,62,112,50,-19,-22,-43,-83,69,21,-122,-38,26,-91,101,100,20,81,69,49,-123,20,81,64,5,20,81,64,5,20,81,64,5,20,81,64,28,-9,-114,-68,58,-66,34,-48,102,-120,15,-33,-58,60,-56,-49,-72,-22,43,-62,44,111,46,52,93,74,43,-120,-13,29,-59,-69,-25,29,-14,15,74,-6,98,-68,99,-30,-89,-123,-1,0,-78,-75,79,-19,8,19,22,-41,7,-26,-57,-16,-73,-7,53,-49,81,53,105,-82,-121,30,34,47,74,-111,-24,123,-97,-123,124,65,15,-119,116,75,107,-24,91,59,-108,7,30,-116,58,-42,-67,124,-3,-16,119,-58,127,-40,58,-65,-10,117,-53,-30,-50,-24,-32,18,120,86,-1,0,57,-81,-96,107,-19,-80,88,-107,-118,-92,-91,-43,110,125,78,15,16,-79,20,-108,-70,-83,-62,-118,40,-82,-13,-72,40,-94,-118,0,40,-94,-118,0,43,-50,-2,49,120,-53,-5,11,71,-5,5,-77,-30,-14,-24,96,-29,-86,-81,-81,-13,-82,-13,80,-66,-117,77,-79,-98,-22,102,-37,20,42,89,-119,-81,-106,60,85,-30,9,-68,79,-82,92,-33,74,73,14,-40,69,-12,94,-62,-68,108,-45,21,-20,41,114,71,121,126,71,-111,-103,98,125,-115,62,72,-17,34,29,3,69,-105,95,-43,96,-77,-120,18,100,111,-103,-67,23,-71,-81,-94,116,-35,62,45,46,-58,27,88,84,44,113,-88,94,63,83,92,111,-62,-49,11,127,101,105,-97,-38,19,-82,46,110,7,-53,-111,-54,-81,-7,53,-35,-110,20,18,78,5,124,-83,56,-14,-85,-77,-62,-95,79,-106,55,123,-80,-94,-71,-106,-8,-115,-95,-90,-91,-10,51,115,-13,-18,-37,-65,7,110,127,42,-23,85,-125,40,101,57,82,50,8,-83,83,79,99,-95,73,75,102,45,20,81,76,97,69,20,80,1,69,20,80,1,69,20,80,1,69,20,80,1,89,-6,-2,-117,22,-65,-91,79,101,40,24,113,-14,-73,-93,118,53,-95,69,27,-125,87,86,103,-51,26,-106,-97,62,-117,-87,75,109,40,49,-53,11,-16,122,125,13,125,3,-16,-85,-58,-117,-30,-115,21,109,-25,124,-33,90,-115,-81,-22,-61,-42,-71,15,-117,94,23,-5,101,-102,-22,-74,-23,-5,-40,120,-105,3,-110,-66,-65,-54,-72,47,2,-8,-106,79,11,-8,-118,-38,-23,79,-18,-103,-126,72,-66,-86,120,-2,-75,88,60,67,-62,87,87,-8,94,-25,62,26,-85,-63,-41,-41,-31,103,-44,-76,84,118,-13,-91,-44,49,-51,25,-35,28,-118,25,79,-79,-87,43,-18,-49,-77,10,40,-94,-128,10,40,-93,-81,20,1,-26,95,28,-68,68,116,-3,14,45,54,38,-60,-105,103,47,-113,-18,-13,-1,0,-42,-81,37,-16,78,-126,124,65,-30,11,120,8,-52,72,119,-55,-12,28,-1,0,74,-41,-8,-69,-84,29,91,-58,87,10,14,99,-73,2,53,-4,-122,107,-88,-8,57,-92,8,52,-53,-115,65,-105,-26,-103,-74,41,-10,24,53,-16,-72,-38,-97,88,-59,75,-78,-45,-18,62,51,21,63,-84,98,-97,101,-6,30,-120,-111,-84,104,-88,-125,8,-93,10,61,-85,-110,-8,-105,-30,51,-95,-24,77,20,77,-74,-26,-25,-28,92,117,3,-42,-70,-2,-68,87,-122,124,82,-43,-50,-91,-30,103,-119,91,49,91,-115,-128,123,-16,107,-98,-92,-71,98,58,-46,-28,-122,-121,59,-94,105,115,107,90,-92,22,-80,-126,-49,35,-126,79,-96,-22,77,125,29,99,107,-10,43,56,45,-9,110,-14,-112,38,79,124,10,-13,-81,-125,-70,24,-114,-38,125,82,69,-7,-100,-20,-116,-5,122,-41,-91,-44,-46,-115,-107,-56,-61,-61,-106,60,-35,-62,-118,40,-83,-50,-96,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-94,-118,40,0,-94,-118,40,2,59,-120,18,-22,-34,72,100,93,-47,-56,-69,88,26,-7,-41,-60,-6,59,-24,58,-27,-43,-103,-32,35,18,-121,-38,-66,-114,-81,44,-8,-51,-92,-123,107,61,69,71,95,-35,-71,-3,127,-83,97,86,55,87,57,113,17,-68,111,-40,-18,62,13,-8,-120,-21,30,23,91,121,27,116,-10,-121,97,-49,-9,122,15,-27,93,-11,124,-3,-16,67,88,54,62,42,107,70,108,71,114,-124,99,-36,116,-2,117,-12,13,125,-114,91,91,-37,97,-30,-34,-21,67,-23,50,-6,-66,-41,15,27,-18,-76,10,40,-94,-67,51,-47,10,-114,-30,81,4,50,72,122,34,-106,-4,-86,74,-95,-81,72,98,-47,47,-36,117,16,63,-14,-87,-109,-76,91,38,78,-55,-77,-27,93,106,-28,-34,107,23,-77,19,-110,-13,55,-13,-59,123,-25,-125,44,70,-97,-31,-115,62,32,48,124,-80,79,-42,-66,124,31,-68,-68,63,-19,74,127,-12,42,-6,90,-62,63,42,-58,-35,7,-16,-58,5,126,119,79,-34,-109,-109,62,35,15,-17,74,82,100,-109,73,-28,-61,36,-97,-36,82,-33,-107,124,-45,-86,92,53,-26,-91,117,49,57,47,43,127,58,-6,47,94,115,30,-117,124,-61,-76,45,-4,-85,-26,-27,-7,-82,70,123,-55,-3,104,-83,-47,11,20,-10,71,-48,-34,14,-79,26,111,-122,116,-8,64,-63,-14,-61,31,-83,108,-44,26,122,-123,-80,-74,3,-96,-116,84,-11,-48,-74,59,-94,-84,-110,10,40,-94,-104,-62,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-118,40,-96,2,-71,111,-119,118,63,110,-16,-107,-41,25,104,-56,113,-7,-118,-22,107,47,-59,17,-119,124,63,-88,41,-24,98,53,50,-43,50,102,-81,22,-113,10,-16,93,-15,-79,-15,78,-103,56,56,-3,-14,-125,-12,36,87,-43,106,-37,-107,72,-18,1,-4,-21,-28,45,53,-68,-85,-21,70,7,27,101,83,-6,-41,-41,22,77,-66,-50,-35,-67,98,83,-6,10,-10,-78,89,123,-77,-113,-95,-41,-109,-53,-35,-100,73,-88,-94,-118,-6,83,-24,-126,-77,-4,64,-91,-12,45,65,71,83,3,-1,0,42,-48,-88,-82,-31,-5,69,-84,-47,127,125,25,127,49,83,37,120,-76,76,-107,-45,71,-56,107,-14,93,-25,-46,83,-4,-21,-23,123,9,60,-37,27,119,-2,-14,3,95,54,-22,-112,27,93,78,-18,34,48,82,102,31,-8,-15,-81,-96,124,31,120,53,15,12,-23,-13,3,-97,-35,0,107,-13,-70,90,73,-93,-31,-16,-38,74,81,47,106,-47,121,-6,93,-36,99,-85,68,-61,-12,-81,-102,-92,-52,87,14,59,-84,-121,-7,-41,-45,-5,67,124,-89,-95,-32,-41,-50,94,42,-45,-37,75,-15,5,-20,12,49,-119,11,15,-95,-25,-6,-47,89,108,-57,-118,91,51,-33,-76,27,-127,117,-94,-40,-54,-89,33,-94,21,126,-72,-33,-123,122,-80,-44,60,50,-112,19,-103,45,-114,-61,-12,-1,0,38,-69,42,-34,46,-23,51,-82,18,-26,-118,97,69,20,85,22,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,21,-103,-30,102,9,-31,-5,-10,61,60,-93,90,117,-51,-4,68,-67,22,94,19,-68,57,-63,112,20,126,98,-108,-74,100,-55,-38,45,-98,15,96,-66,101,-19,-88,29,-28,81,-6,-41,-41,22,11,-74,-58,-39,125,34,79,-3,4,87,-54,-98,21,-76,55,-98,34,-45,96,3,37,-89,79,-26,43,-21,8,-41,100,104,-66,-118,7,-28,43,-40,-55,99,-92,-27,-24,117,-28,-15,-46,114,-12,29,69,20,87,-45,31,68,20,116,32,-6,81,69,0,124,-49,-15,75,73,58,71,-116,-81,23,110,18,98,36,95,-56,87,105,-16,119,86,23,58,60,-10,44,126,123,118,-56,30,-57,2,-82,124,119,-16,-7,-72,-45,-19,-75,104,-41,45,1,-39,38,61,15,57,-81,53,-16,14,-65,-3,-127,-30,40,100,99,-120,101,-3,-37,-1,0,79,-42,-66,15,23,79,-22,-8,-87,46,-113,-11,62,47,17,15,-85,-30,-102,-24,-1,0,83,-33,-21,-54,-2,49,104,37,101,-125,85,-115,126,82,54,73,-113,94,-57,-12,-81,84,86,12,-96,-87,-54,-98,65,-86,90,-42,-105,22,-75,-90,79,103,48,-54,72,-72,-49,-95,-11,-84,-27,30,101,99,90,-111,-25,-117,71,-116,124,52,-15,24,-48,-11,-47,28,-83,-117,123,-97,-111,-67,-113,99,94,-23,-12,57,21,-13,94,-79,-91,-49,-95,106,114,-38,76,10,-53,19,112,125,125,13,122,-9,-61,79,24,127,110,88,11,43,-122,-1,0,76,-73,92,103,-5,-53,-21,88,-46,-107,-67,-42,114,-31,-25,111,114,71,109,69,20,87,73,-36,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,21,-26,127,25,-75,80,-74,-74,122,122,-98,88,-7,-114,61,-65,-56,-81,74,-110,69,-118,54,118,59,85,70,73,-81,-98,-68,103,-82,29,127,-60,23,55,32,-26,32,118,-58,63,-39,21,-115,89,90,54,57,-79,18,-27,-123,-69,-101,-1,0,6,-12,-109,-87,120,-54,41,74,-26,59,100,46,79,-65,111,-27,95,69,-41,-102,-4,15,-16,-15,-45,116,9,111,-27,92,75,118,-33,46,127,-70,58,127,58,-12,-86,-6,-20,-78,-113,-78,-61,-85,-18,-11,62,-121,46,-91,-20,-80,-22,-5,-67,66,-118,40,-81,84,-12,-62,-118,40,-96,10,90,-50,-105,22,-75,-91,-36,-39,76,51,28,-56,84,-41,-54,-6,-10,-113,63,-121,-11,123,-117,25,-63,89,33,124,3,-22,59,26,-6,-42,-68,-37,-29,7,-127,78,-71,97,-3,-89,103,30,111,109,-57,-50,-96,114,-21,94,38,105,-123,117,-23,-5,72,-17,31,-56,-15,-13,44,43,-83,79,-98,59,-81,-56,-50,-8,99,-30,-63,-83,105,98,-54,119,-1,0,75,-73,24,25,60,-78,-10,-2,85,-37,-41,-51,58,78,-87,113,-94,106,17,93,-37,-79,73,99,61,61,125,65,-81,126,-16,-65,-119,-83,-68,77,-90,-92,-16,-80,18,-127,-119,35,-18,-90,-66,94,-100,-7,-107,-103,-31,80,-85,-52,-71,94,-26,87,-113,124,14,-66,40,-75,89,109,-10,-57,125,31,-35,99,-4,67,-48,-42,127,-61,-81,1,-35,120,110,-22,91,-53,-26,81,51,46,-59,-115,123,10,-17,104,-85,-28,87,-26,53,-10,113,-26,-25,-22,20,81,69,89,-88,81,69,20,0,81,69,20,0,81,69,20,0,81,69,20,0,81,69,98,-8,-85,-59,22,-34,23,-45,94,121,72,51,17,-120,-93,-18,-57,-4,41,55,109,88,-101,81,87,103,59,-15,79,-59,67,75,-45,78,-99,110,-1,0,-23,55,3,13,-113,-31,90,-13,31,9,120,126,111,19,107,-74,-42,81,41,33,-101,115,-73,96,-93,-109,84,-11,29,66,-25,92,-44,-98,-30,98,-46,79,51,112,58,-3,0,-81,125,-8,83,-32,127,-8,69,-12,-97,-75,92,-89,-6,125,-56,-53,127,-80,-66,-107,88,76,59,-58,86,75,-20,-83,-50,124,61,23,-116,-83,-3,-44,118,-106,54,81,105,-74,112,-37,66,-69,98,-119,66,40,-6,85,-118,40,-81,-68,74,-54,-56,-5,52,-84,-84,-126,-118,40,-96,97,69,20,80,1,72,-54,25,72,35,32,-16,65,-91,-94,-128,60,63,-30,-73,-61,71,-79,-102,93,99,76,-117,117,-69,29,-45,66,-93,-18,31,81,-19,-42,-68,-13,64,-15,5,-33,-121,111,-106,-26,-43,-56,32,-4,-56,122,48,-12,53,-11,-116,-111,-84,-88,-56,-22,25,88,96,-87,-24,107,-58,-66,35,124,33,104,-38,93,75,69,76,-89,-34,-110,-44,118,-9,21,-14,-39,-122,92,-45,117,-88,47,85,-2,71,-51,99,-80,14,47,-37,80,-5,-114,-105,-62,-66,50,-78,-15,69,-88,49,56,-114,-28,15,-98,22,60,-118,-33,-81,-103,109,-18,46,116,-69,-79,36,76,-10,-9,17,-97,-95,21,-23,-66,22,-8,-72,-114,18,-33,87,93,-83,-48,92,47,67,-11,-81,18,53,58,72,-13,-87,-30,19,-46,123,-98,-101,69,65,103,125,111,-88,66,37,-74,-103,38,67,-48,-87,-51,79,91,-99,97,69,20,80,1,69,20,80,1,69,20,80,1,69,87,-67,-44,45,-76,-24,76,-73,51,-92,40,58,-18,63,-46,-68,-29,-59,31,23,21,67,-37,-23,11,-106,-24,110,27,-6,84,-54,74,59,-111,58,-111,-126,-44,-21,-4,85,-29,43,47,11,-38,-109,35,9,46,88,124,-112,-87,-25,-15,-81,14,-41,117,-21,-65,17,106,13,115,114,-27,-103,-114,21,7,69,30,-126,-96,102,-69,-42,-81,-78,76,-105,87,50,-97,-87,53,-20,95,14,126,17,11,19,22,-91,-84,-96,121,-2,-12,118,-25,-94,-5,-97,122,84,104,-43,-58,79,-106,11,67,-102,-99,58,-72,-39,-14,-63,104,65,-16,-97,-31,-101,66,-47,-21,26,-92,88,110,-80,66,-61,-1,0,30,53,-20,20,-118,-95,84,0,48,7,0,82,-41,-37,-31,-16,-16,-61,83,-28,-127,-11,-40,122,16,-61,-61,-110,1,69,20,87,73,-46,20,81,69,0,20,81,69,0,20,81,69,0,20,81,69,0,113,94,50,-8,91,-90,120,-87,90,100,95,-78,95,118,-107,7,12,125,-59,120,-97,-119,-66,31,-21,30,23,-111,-66,-47,108,-46,-64,58,77,16,-36,-65,-113,-91,125,67,76,-110,20,-103,10,72,-117,34,30,-86,-61,34,-68,-84,86,91,71,17,-17,45,36,121,120,-100,-66,-106,35,-34,90,51,-28,-83,51,91,-67,-46,36,-33,103,114,-16,-112,122,43,113,-7,87,111,-92,-4,98,-67,-73,80,-105,-10,-23,112,-65,-34,79,-108,-41,-91,-8,-125,-31,38,-123,-82,-106,-111,98,54,115,-97,-29,-121,-89,-27,94,127,-85,-4,8,-43,45,-117,53,-123,-44,119,73,-39,91,-122,-2,85,-13,-75,50,-36,85,31,-123,93,121,30,28,-16,56,-86,15,-36,-43,121,127,-111,-48,88,124,88,-48,-18,-64,-13,90,75,102,-12,101,-29,-13,-83,-85,127,25,104,-105,11,-108,-44,97,31,-17,48,31,-42,-68,102,-1,0,-31,-41,-120,-76,-10,62,110,-105,43,1,-4,74,50,43,34,93,23,80,-128,-2,-14,-54,116,-57,-86,-41,19,-10,-80,-46,81,-4,14,119,82,-76,52,-100,127,3,-24,95,-8,73,52,-65,-6,8,91,-1,0,-33,-63,85,-18,60,101,-94,91,-126,95,81,-121,-2,2,-64,-1,0,90,-7,-5,-5,62,-13,-2,125,-26,-4,-115,79,15,-121,-11,59,-125,-120,-20,39,127,-8,13,47,105,55,-76,69,-11,-119,-67,-94,123,6,-95,-15,99,68,-77,4,68,-46,92,-73,-94,-81,31,-99,114,122,-73,-58,43,-21,-112,-55,99,110,-106,-53,-3,-26,-7,-115,99,105,-1,0,11,-4,73,-88,17,-77,78,120,-108,-1,0,20,-100,10,-21,-76,127,-128,-105,82,-107,109,74,-7,97,94,-23,23,39,-11,21,-47,12,62,42,-73,-61,23,-7,26,-58,-98,46,-74,-111,-115,-65,3,-52,-11,45,98,-5,88,-101,117,-35,-60,-105,14,122,41,36,-113,-64,87,71,-31,111,-122,26,-49,-119,100,86,-14,90,-46,-41,-68,-77,12,113,-20,15,90,-10,-65,15,-4,51,-48,-68,61,-75,-94,-75,19,-52,63,-27,-92,-36,-97,-54,-70,-91,80,-118,21,64,80,59,40,-64,-81,90,-122,79,-81,53,121,124,-105,-7,-98,-115,28,-89,94,106,-14,-7,47,-13,57,111,8,124,59,-46,-4,35,24,104,99,-13,-18,-15,-13,79,32,-55,-4,61,43,-86,-94,-118,-6,58,116,-31,74,60,-80,86,71,-65,78,-100,105,-57,-106,10,-56,40,-94,-118,-48,-48,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,40,-94,-118,0,41,-83,18,55,-34,69,111,-88,20,81,64,13,-5,52,95,-13,-55,63,-17,-111,78,88,-43,126,-22,-123,-6,1,69,20,0,-22,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,10,40,-94,-128,63,-1,-39],\"isON\":false,\"needSeat\":true},\"event_class\":{\"myArrayList\":[\"1\"]},\"ticket\":[{\"ticket_name\":\"xxx\",\"ticket_price\":\"123\",\"ticket_quantity\":\"444\",\"start_date\":\"2022-12-09 17:09:45\",\"end_date\":\"2022-12-16 17:09:49\",\"ticket_min\":\"1\",\"ticket_max\":\"10\",\"record\":0},{\"ticket_name\":\"xxx2\",\"ticket_price\":\"123\",\"ticket_quantity\":\"444\",\"start_date\":\"2022-12-16 17:10:12\",\"end_date\":\"2022-12-17 17:10:15\",\"ticket_min\":\"2\",\"ticket_max\":\"10\",\"record\":2}]}";
			
			//create errorMsge
			List<String> errorMsgs = new LinkedList<String>();
			req.setAttribute("errorMsgs", errorMsgs);
			
			JSONObject json = new JSONObject(alldata);
			//get page2 data
			JSONArray jarr =new JSONArray();
			jarr = json.getJSONArray("ticket");
			if(jarr.length() != 0) {
				for(int i = 0 ; i< jarr.length() ; i++) {
					JSONObject jsonO = jarr.getJSONObject(i);

					String ticket_name=jsonO.get("ticket_name").toString();
					if(ticket_name == null || ticket_name.trim().length() == 0) {
						errorMsgs.add("票種名稱: 請勿空白");
					}
					
					Integer ticket_price = null;
					try {
						ticket_price = Integer.valueOf(jsonO.get("ticket_price").toString());
					} catch (NumberFormatException e) {
						errorMsgs.add("價格:只能是數字");
					}
							
					Integer ticket_quantity= null;
					try {
						ticket_quantity = Integer.valueOf(jsonO.get("ticket_quantity").toString());
					} catch (NumberFormatException e) {
						errorMsgs.add("數量:只能是數字");
					}
					
					java.sql.Timestamp start_date= null;
					try {
						start_date = java.sql.Timestamp.valueOf(jsonO.get("start_date").toString());
						System.out.println("page2 date=" + start_date);
					} catch (IllegalArgumentException e) {
						errorMsgs.add("請輸入日期!");
					}
					
					java.sql.Timestamp end_date= null;
					try {
						end_date = java.sql.Timestamp.valueOf(jsonO.get("end_date").toString());
						if(start_date !=null) {
							if(end_date.compareTo(start_date) == -1) {
								errorMsgs.add("日期區間不對!");
							}
						}
					} catch (IllegalArgumentException e) {
						errorMsgs.add("請輸入日期!");
					}
					
					Integer ticket_min= null;
					try {
						ticket_min=Integer.valueOf(jsonO.get("ticket_min").toString());
					} catch (NumberFormatException e) {
						errorMsgs.add("最小限制販售數量:只能是數字");
					}
					
					Integer ticket_max= null;
					try {
						ticket_max=Integer.valueOf(jsonO.get("ticket_max").toString());
					} catch (NumberFormatException e) {
						errorMsgs.add("最大限制販售數量:只能是數字");
					}
					
//					System.out.println("ticket_name="+ticket_name);
//					System.out.println("ticket_price="+ticket_price);
//					System.out.println("ticket_quantit="+ticket_quantity);
//					System.out.println("start_date="+start_date);
//					System.out.println("end_date="+end_date);
//					System.out.println("ticket_min="+ticket_min);
//					System.out.println("ticket_max="+ticket_max);
				}
			}else {
				errorMsgs.add("沒有票種資料");
			}
			
			JSONObject page1j = json.getJSONObject("page1");
			JSONObject event_class = json.getJSONObject("event_class");
			
			// Send the use back to the form, if there were errors
			if(!errorMsgs.isEmpty()) {
				Map<String,Object> map=new HashMap<>();
				map.put("page1",page1j.toString());
				map.put("event_class", event_class.toString());
				Gson gson=new GsonBuilder().setDateFormat("yyyy-MM-dd HH:mm:ss").create();
				System.out.println("not empty");
				req.setAttribute("adddata", gson.toJson(map));
				req.setAttribute("errorMsg","送出資料格式有誤 請重新填寫");
				RequestDispatcher failureView = req
						.getRequestDispatcher("/back-organizer-end/event/addEvent2.jsp");
				failureView.forward(req, res);
				return;
			}
		/***************************2.判斷有無劃位 有資料帶至下一頁面 否 新增資料***************************************/	
			//2.if isOn true go page3 else go insert and return organizer page.
			Boolean needSeat =Boolean.valueOf(page1j.get("needSeat").toString());
			if(needSeat) {
				System.out.println("need seat="+needSeat);
				
				req.setAttribute("adddata", alldata);
				RequestDispatcher failureView = req
						.getRequestDispatcher("/back-organizer-end/event/addEvent3.jsp");
				failureView.forward(req, res);
				return;

			}else {
				System.out.println("not need="+needSeat);
				// call service insert data
				EventService eventSvc = new EventService();
				int eventInsertOK = eventSvc.addEvent(alldata);
				
				res.sendRedirect(req.getContextPath() + "/main_frame/index_manufacturer.jsp");
			}
		}
		
	}
}
